Transcription of [[course-zoomcamp/03-classification/notes/notebook#3 4 EDA]]
# 3.4 EDA

* Check missing values
* Look at the target variable (churn)
* Look at numerical and categorical variables

```python
# Drop indices for readability
df_full_train = df_full_train.reset_index(drop=True)
df_full_train.head().T
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>customerid</th>
      <td>5442-pptjy</td>
      <td>6261-rcvns</td>
      <td>2176-osjuv</td>
      <td>6161-erdgd</td>
      <td>2364-ufrom</td>
    </tr>
    <tr>
      <th>gender</th>
      <td>male</td>
      <td>female</td>
      <td>male</td>
      <td>male</td>
      <td>male</td>
    </tr>
    <tr>
      <th>seniorcitizen</th>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>partner</th>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
    </tr>
    <tr>
      <th>dependents</th>
      <td>yes</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>no</td>
    </tr>
    <tr>
      <th>tenure</th>
      <td>12</td>
      <td>42</td>
      <td>71</td>
      <td>71</td>
      <td>30</td>
    </tr>
    <tr>
      <th>phoneservice</th>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>multiplelines</th>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
    </tr>
    <tr>
      <th>internetservice</th>
      <td>no</td>
      <td>dsl</td>
      <td>dsl</td>
      <td>dsl</td>
      <td>dsl</td>
    </tr>
    <tr>
      <th>onlinesecurity</th>
      <td>no_internet_service</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>onlinebackup</th>
      <td>no_internet_service</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>deviceprotection</th>
      <td>no_internet_service</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>no</td>
    </tr>
    <tr>
      <th>techsupport</th>
      <td>no_internet_service</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>streamingtv</th>
      <td>no_internet_service</td>
      <td>no</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>streamingmovies</th>
      <td>no_internet_service</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>no</td>
    </tr>
    <tr>
      <th>contract</th>
      <td>two_year</td>
      <td>one_year</td>
      <td>two_year</td>
      <td>one_year</td>
      <td>one_year</td>
    </tr>
    <tr>
      <th>paperlessbilling</th>
      <td>no</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
      <td>no</td>
    </tr>
    <tr>
      <th>paymentmethod</th>
      <td>mailed_check</td>
      <td>credit_card_(automatic)</td>
      <td>bank_transfer_(automatic)</td>
      <td>electronic_check</td>
      <td>electronic_check</td>
    </tr>
    <tr>
      <th>monthlycharges</th>
      <td>19.7</td>
      <td>73.9</td>
      <td>65.15</td>
      <td>85.45</td>
      <td>70.4</td>
    </tr>
    <tr>
      <th>totalcharges</th>
      <td>258.35</td>
      <td>3160.55</td>
      <td>4681.75</td>
      <td>6300.85</td>
      <td>2044.75</td>
    </tr>
    <tr>
      <th>churn</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>



Check for missing values.

```python
df_full_train.isnull().sum()
```




    customerid          0
    gender              0
    seniorcitizen       0
    partner             0
    dependents          0
    tenure              0
    phoneservice        0
    multiplelines       0
    internetservice     0
    onlinesecurity      0
    onlinebackup        0
    deviceprotection    0
    techsupport         0
    streamingtv         0
    streamingmovies     0
    contract            0
    paperlessbilling    0
    paymentmethod       0
    monthlycharges      0
    totalcharges        0
    churn               0
    dtype: int64



No additional data preparation here, we already checked for missing values.

Let's look at the target variable.

```python
df_full_train.churn.value_counts(normalize=True)
```




    0    0.730032
    1    0.269968
    Name: churn, dtype: float64



We see that the number of churned users is almost 1/3rd of non-churned users. **0.269968** is our **churn rate**.

Just getting the mean() gives us the churn rate.

```python
global_churn_rate = df_full_train.churn.mean()
round(global_churn_rate, 2)
```




    0.27



This works because, for a binary variable, the negative value is 0 and the positive value is 1, so only positive values contribute to the mean, giving us the same value as the proportion. Essentially:
- (# of 1s)/*n* = Churn Rate

Let's look at the other variables now. Let's check numerical and categorical variables

```python
df_full_train.dtypes
```




    customerid           object
    gender               object
    seniorcitizen         int64
    partner              object
    dependents           object
    tenure                int64
    phoneservice         object
    multiplelines        object
    internetservice      object
    onlinesecurity       object
    onlinebackup         object
    deviceprotection     object
    techsupport          object
    streamingtv          object
    streamingmovies      object
    contract             object
    paperlessbilling     object
    paymentmethod        object
    monthlycharges      float64
    totalcharges        float64
    churn                 int64
    dtype: object



Only tenure, monthlycharges, and totalcharges are numerical (seniorcitizen is a binary value.)

```python
numerical = ['tenure', 'monthlycharges', 'totalcharges']
```

```python
categorical = [
    'gender',
    'seniorcitizen',
    'partner',
    'dependents',
    'phoneservice',
    'multiplelines',
    'internetservice',
    'onlinesecurity',
    'onlinebackup',
    'deviceprotection',
    'techsupport',
    'streamingtv',
    'streamingmovies',
    'contract',
    'paperlessbilling',
    'paymentmethod',
]
```

Let's take a look of the number of unique values for categorical variables.

```python
df_full_train[categorical].nunique()
```




    gender              2
    seniorcitizen       2
    partner             2
    dependents          2
    phoneservice        2
    multiplelines       3
    internetservice     3
    onlinesecurity      3
    onlinebackup        3
    deviceprotection    3
    techsupport         3
    streamingtv         3
    streamingmovies     3
    contract            3
    paperlessbilling    2
    paymentmethod       4
    dtype: int64
