Transcription of [[course-zoomcamp/03-classification/notes/notebook#3 5 Feature importance Churn rate and risk ratio]]
# 3.5 Feature importance: Churn rate and risk ratio

Feature importance analysis (part of EDA) - identifying which features affect our target variable

* Churn rate
* Risk ratio
* Mutual information - later

Now we can look at churn rate by demographic.

#### Churn rate

```python
df_full_train.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>customerid</th>
      <th>gender</th>
      <th>seniorcitizen</th>
      <th>partner</th>
      <th>dependents</th>
      <th>tenure</th>
      <th>phoneservice</th>
      <th>multiplelines</th>
      <th>internetservice</th>
      <th>onlinesecurity</th>
      <th>...</th>
      <th>deviceprotection</th>
      <th>techsupport</th>
      <th>streamingtv</th>
      <th>streamingmovies</th>
      <th>contract</th>
      <th>paperlessbilling</th>
      <th>paymentmethod</th>
      <th>monthlycharges</th>
      <th>totalcharges</th>
      <th>churn</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5442-pptjy</td>
      <td>male</td>
      <td>0</td>
      <td>yes</td>
      <td>yes</td>
      <td>12</td>
      <td>yes</td>
      <td>no</td>
      <td>no</td>
      <td>no_internet_service</td>
      <td>...</td>
      <td>no_internet_service</td>
      <td>no_internet_service</td>
      <td>no_internet_service</td>
      <td>no_internet_service</td>
      <td>two_year</td>
      <td>no</td>
      <td>mailed_check</td>
      <td>19.70</td>
      <td>258.35</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>6261-rcvns</td>
      <td>female</td>
      <td>0</td>
      <td>no</td>
      <td>no</td>
      <td>42</td>
      <td>yes</td>
      <td>no</td>
      <td>dsl</td>
      <td>yes</td>
      <td>...</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
      <td>yes</td>
      <td>one_year</td>
      <td>no</td>
      <td>credit_card_(automatic)</td>
      <td>73.90</td>
      <td>3160.55</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2176-osjuv</td>
      <td>male</td>
      <td>0</td>
      <td>yes</td>
      <td>no</td>
      <td>71</td>
      <td>yes</td>
      <td>yes</td>
      <td>dsl</td>
      <td>yes</td>
      <td>...</td>
      <td>no</td>
      <td>yes</td>
      <td>no</td>
      <td>no</td>
      <td>two_year</td>
      <td>no</td>
      <td>bank_transfer_(automatic)</td>
      <td>65.15</td>
      <td>4681.75</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>6161-erdgd</td>
      <td>male</td>
      <td>0</td>
      <td>yes</td>
      <td>yes</td>
      <td>71</td>
      <td>yes</td>
      <td>yes</td>
      <td>dsl</td>
      <td>yes</td>
      <td>...</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>yes</td>
      <td>one_year</td>
      <td>no</td>
      <td>electronic_check</td>
      <td>85.45</td>
      <td>6300.85</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2364-ufrom</td>
      <td>male</td>
      <td>0</td>
      <td>no</td>
      <td>no</td>
      <td>30</td>
      <td>yes</td>
      <td>no</td>
      <td>dsl</td>
      <td>yes</td>
      <td>...</td>
      <td>no</td>
      <td>yes</td>
      <td>yes</td>
      <td>no</td>
      <td>one_year</td>
      <td>no</td>
      <td>electronic_check</td>
      <td>70.40</td>
      <td>2044.75</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows Ã— 21 columns</p>
</div>



For example, gender. Let's see churn rate among female customers

```python
churn_female = df_full_train[df_full_train.gender == 'female'].churn.mean()
churn_female
```




    0.27682403433476394



Churn rate for female customers is pretty close to the global churn rate.

```python
churn_male = df_full_train[df_full_train.gender == 'male'].churn.mean()
churn_male
```




    0.2632135306553911



Churn rate for male customers is pretty close to the global churn rate as well.

```python
global_churn = df_full_train.churn.mean()
global_churn
```




    0.26996805111821087



```python
global_churn - churn_female
```




    -0.006855983216553063



```python
global_churn - churn_male
```




    0.006754520462819769



Let's see for churn rate for customers who live with partners.

```python
df_full_train.partner.value_counts()
```




    no     2932
    yes    2702
    Name: partner, dtype: int64



```python
churn_partner = df_full_train[df_full_train.partner == 'yes'].churn.mean()
churn_partner
```




    0.20503330866025166



```python
global_churn - churn_partner
```




    0.06493474245795922



This is noticably less than the global rate.

```python
churn_no_partner = df_full_train[df_full_train.partner == 'no'].churn.mean()
churn_no_partner
```




    0.3298090040927694



```python
global_churn - churn_no_partner
```




    -0.05984095297455855



This is noticably *more* than the global rate. It seems to be about 6% less for those with partners and 6% more for those without partners.

It seems that *gender* does not matter for churn, where as having a *partner* does matter. This brings us to our first point.

### 1. **Churn rate** 
Difference between mean of the target variable and mean of categories for a feature. If this difference is greater than 0, it means that the category is less likely to churn, and if the difference is lower than 0, the group is more likely to churn. The larger differences are indicators that a variable is more important than others.
- If group rate churn rate < global churn rate
    - Group is less likely to churn
- If group rate churn rate > global churn rate
    - Group is *more* likely to churn

Instead of comparing them, we can divide one by another, bringing us to our second point.

#### Risk ratio

Dividing the group churn rate by the global churn rate.

```python
churn_no_partner / global_churn
```




    1.2216593879412643



The risk ratio for the no-partner group is greater than 1. They are *more* likely to churn.

```python
churn_partner / global_churn
```




    0.7594724924338315



The risk ratio for the partner group is less than 1. They are *less* likely to churn. To explain risk ratio:

### 2. **Risk ratio** 
Ratio between mean of categories for a feature and mean of the target variable. If this ratio is greater than 1, the category is more likely to churn, and if the ratio is lower than 1, the category is less likely to churn. It expresses the feature importance in relative terms. 
- Risk = group / global
    - \> 1: more likely to churn
    - < 1: less likely to churn

We can see that the no-partner group is about 22% higher, the partner group is about 24% lower. Let's visualize this.

```python
labels = ['Example', 'No-Partner', 'Partner']

x = np.arange(len(labels))  # the label locations
width = 0.5  # the width of the bars

fig, ax = plt.subplots()
rects1 = ax.bar(x - width/4, [round(global_churn-0.01, 2), round(churn_no_partner, 2), round(churn_partner, 2)], width, label='Group')
rects2 = ax.bar(x + width/4, [round(global_churn, 2), round(global_churn, 2), round(global_churn, 2)], width, label='Global')

# Add some text for labels, title and custom x-axis tick labels, etc.
ax.margins(0.25)
ax.set_ylabel('Churn Rate')
ax.set_title('Churn Rate by Partner Status')
ax.set_xticks(x, labels)
ax.legend()

ax.bar_label(rects1, padding=4)
ax.bar_label(rects2, padding=4)

fig.tight_layout()

plt.show()
```


    
![png](../images/churn-rate-partner.png)
    


- For the control group, we see there is about the same risk as every other user.
- For the no-partner group, the risk ratio is 22%. They are **high risk**.
- For the partner group, the risk ratio is -6%. They are **low risk**.

We can implement something like this in SQL.

```
SELECT
    gender,
    AVG(churn),
    AVG(churn) - global_churn AS diff,
    AVG(churn) / global_churn AS risk
FROM
    data
GROUP BY
    gender;
```

Let's translate this to Pandas

```python
from IPython.display import display
```

```python
df_full_train.groupby('gender').churn.mean()
```




    gender
    female    0.276824
    male      0.263214
    Name: churn, dtype: float64



Need multiple statistics. Can use **.agg()** for this:

```python
df_group = df_full_train.groupby('gender').churn.agg(['mean', 'count'])
df_group['diff'] = df_group['mean'] - global_churn
df_group['risk'] = df_group['mean'] / global_churn
df_group
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>gender</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>female</th>
      <td>0.276824</td>
      <td>2796</td>
      <td>0.006856</td>
      <td>1.025396</td>
    </tr>
    <tr>
      <th>male</th>
      <td>0.263214</td>
      <td>2838</td>
      <td>-0.006755</td>
      <td>0.974980</td>
    </tr>
  </tbody>
</table>
</div>



Want to do this for every categorical variable

```python
# Need ipython display to make this look nice.
for category in categorical:
    print(category)
    df_group = df_full_train.groupby(category).churn.agg(['mean', 'count'])
    df_group['diff'] = df_group['mean'] - global_churn
    df_group['risk'] = df_group['mean'] / global_churn
    display(df_group)
    print()
    print()
```

    gender



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>gender</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>female</th>
      <td>0.276824</td>
      <td>2796</td>
      <td>0.006856</td>
      <td>1.025396</td>
    </tr>
    <tr>
      <th>male</th>
      <td>0.263214</td>
      <td>2838</td>
      <td>-0.006755</td>
      <td>0.974980</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    seniorcitizen



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>seniorcitizen</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.242270</td>
      <td>4722</td>
      <td>-0.027698</td>
      <td>0.897403</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.413377</td>
      <td>912</td>
      <td>0.143409</td>
      <td>1.531208</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    partner



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>partner</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.329809</td>
      <td>2932</td>
      <td>0.059841</td>
      <td>1.221659</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.205033</td>
      <td>2702</td>
      <td>-0.064935</td>
      <td>0.759472</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    dependents



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>dependents</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.313760</td>
      <td>3968</td>
      <td>0.043792</td>
      <td>1.162212</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.165666</td>
      <td>1666</td>
      <td>-0.104302</td>
      <td>0.613651</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    phoneservice



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>phoneservice</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.241316</td>
      <td>547</td>
      <td>-0.028652</td>
      <td>0.893870</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.273049</td>
      <td>5087</td>
      <td>0.003081</td>
      <td>1.011412</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    multiplelines



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>multiplelines</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.257407</td>
      <td>2700</td>
      <td>-0.012561</td>
      <td>0.953474</td>
    </tr>
    <tr>
      <th>no_phone_service</th>
      <td>0.241316</td>
      <td>547</td>
      <td>-0.028652</td>
      <td>0.893870</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.290742</td>
      <td>2387</td>
      <td>0.020773</td>
      <td>1.076948</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    internetservice



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>internetservice</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>dsl</th>
      <td>0.192347</td>
      <td>1934</td>
      <td>-0.077621</td>
      <td>0.712482</td>
    </tr>
    <tr>
      <th>fiber_optic</th>
      <td>0.425171</td>
      <td>2479</td>
      <td>0.155203</td>
      <td>1.574895</td>
    </tr>
    <tr>
      <th>no</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    onlinesecurity



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>onlinesecurity</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.420921</td>
      <td>2801</td>
      <td>0.150953</td>
      <td>1.559152</td>
    </tr>
    <tr>
      <th>no_internet_service</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.153226</td>
      <td>1612</td>
      <td>-0.116742</td>
      <td>0.567570</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    onlinebackup



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>onlinebackup</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.404323</td>
      <td>2498</td>
      <td>0.134355</td>
      <td>1.497672</td>
    </tr>
    <tr>
      <th>no_internet_service</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.217232</td>
      <td>1915</td>
      <td>-0.052736</td>
      <td>0.804660</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    deviceprotection



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>deviceprotection</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.395875</td>
      <td>2473</td>
      <td>0.125907</td>
      <td>1.466379</td>
    </tr>
    <tr>
      <th>no_internet_service</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.230412</td>
      <td>1940</td>
      <td>-0.039556</td>
      <td>0.853480</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    techsupport



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>techsupport</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.418914</td>
      <td>2781</td>
      <td>0.148946</td>
      <td>1.551717</td>
    </tr>
    <tr>
      <th>no_internet_service</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.159926</td>
      <td>1632</td>
      <td>-0.110042</td>
      <td>0.592390</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    streamingtv



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>streamingtv</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.342832</td>
      <td>2246</td>
      <td>0.072864</td>
      <td>1.269897</td>
    </tr>
    <tr>
      <th>no_internet_service</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.302723</td>
      <td>2167</td>
      <td>0.032755</td>
      <td>1.121328</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    streamingmovies



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>streamingmovies</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.338906</td>
      <td>2213</td>
      <td>0.068938</td>
      <td>1.255358</td>
    </tr>
    <tr>
      <th>no_internet_service</th>
      <td>0.077805</td>
      <td>1221</td>
      <td>-0.192163</td>
      <td>0.288201</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.307273</td>
      <td>2200</td>
      <td>0.037305</td>
      <td>1.138182</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    contract



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>contract</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>month-to-month</th>
      <td>0.431701</td>
      <td>3104</td>
      <td>0.161733</td>
      <td>1.599082</td>
    </tr>
    <tr>
      <th>one_year</th>
      <td>0.120573</td>
      <td>1186</td>
      <td>-0.149395</td>
      <td>0.446621</td>
    </tr>
    <tr>
      <th>two_year</th>
      <td>0.028274</td>
      <td>1344</td>
      <td>-0.241694</td>
      <td>0.104730</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    paperlessbilling



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>paperlessbilling</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>no</th>
      <td>0.172071</td>
      <td>2313</td>
      <td>-0.097897</td>
      <td>0.637375</td>
    </tr>
    <tr>
      <th>yes</th>
      <td>0.338151</td>
      <td>3321</td>
      <td>0.068183</td>
      <td>1.252560</td>
    </tr>
  </tbody>
</table>
</div>


    
    
    paymentmethod



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>count</th>
      <th>diff</th>
      <th>risk</th>
    </tr>
    <tr>
      <th>paymentmethod</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>bank_transfer_(automatic)</th>
      <td>0.168171</td>
      <td>1219</td>
      <td>-0.101797</td>
      <td>0.622928</td>
    </tr>
    <tr>
      <th>credit_card_(automatic)</th>
      <td>0.164339</td>
      <td>1217</td>
      <td>-0.105630</td>
      <td>0.608733</td>
    </tr>
    <tr>
      <th>electronic_check</th>
      <td>0.455890</td>
      <td>1893</td>
      <td>0.185922</td>
      <td>1.688682</td>
    </tr>
    <tr>
      <th>mailed_check</th>
      <td>0.193870</td>
      <td>1305</td>
      <td>-0.076098</td>
      <td>0.718121</td>
    </tr>
  </tbody>
</table>
</div>


    
    


- Senior citizens are more likely to churn
- People who have no partner are more likely to churn (vs less likely for partnered)
    - Important: Predictive power
- People who have no dependents are more likely to churn (vs less likely for with dependents)
    - Similar to partner
- Approximately the same for people with phone service
- People who have no phone service are much less likely, one line slightly less, multiple lines slightly likelier
- People with no internet are very likely to stay
- People with fiber optic internet are at high risk of churn
- People without online backup, device protection or tech support are highly likely to churn
- People with month-to-month are more likely to churn (people with long contracts are very unlikely to churn)
- People with paperless billing are more likely to churn
- People who pay with electronic check are highly likely to churn

A customer with, say, no partner, no kids, and a month-to-month plan are very likely to churn.
- Very unlikely for the opposite

Variables with a high risk ratio are the kind we want to use for ML algorithms.

It would be useful to have a number to describe how important a variable is overall.

# Summary

1. **Churn rate:** Difference between mean of the target variable and mean of categories for a feature. 

2. **Risk ratio:** Ratio between mean of categories for a feature and mean of the target variable. 